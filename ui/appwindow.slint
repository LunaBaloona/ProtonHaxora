import { Button, LineEdit, VerticalBox, ComboBox } from "std-widgets.slint";

export component AppWindow inherits Window {
    title: "phxaur v0.3.0";
    min_width: 450px;

    in property <[string]> game_names: [];
    in-out property <string> app_id <=> input_id.text;

    callback run_protonhax(string);
    callback game_selected(string);

    VerticalBox {
        padding: 20px;
        spacing: 15px;

        Text { text: "Select an Installed Game:"; font_size: 14px; }

        ComboBox {
            model: root.game_names;
            selected(name) => {
                root.game_selected(name);
            }
        }

        Text { text: "Or Enter App ID Manually:"; font_size: 14px; }

        input_id := LineEdit {
            placeholder-text: "App ID (e.g., 1601570)";
            font-size: 16px;
        }

        VerticalBox {
            padding: 0;
            spacing: 5px;
            Text {
                text: "Steam Launch Options reminder:";
                font-size: 11px;
                wrap: word-wrap;
            }
            LineEdit {
                text: "protonhax init %COMMAND%";
                read-only: true;
            }
        }

        // --- New Instruction Message ---
        Text {
            text: "Press Launch, then when at the game's menu, press F1 to launch Aurora";
            font-size: 12px;
            color: #3498db; // Highlighted color for the new workflow
            wrap: word-wrap;
            horizontal-alignment: center;
        }

        Button {
            text: "Launch"; // Renamed button
            primary: true;
            clicked => {
                root.run_protonhax(root.app_id);
            }
        }
    }
}
